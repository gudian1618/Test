## 进程与线程
程序是指令的有序集合，其本身没有任何运行的含义，是一个静态的概念。进程是程序在处理机上的一次执行过程，它是一个动态的概念。

进程是一个具有独立功能的程序，一个实体，每个进程都有它自己的地址空间。

进程的状态：进程执行时的间断性，决定了进程可能具有多种状态，事实上，运行中的进程具有以下三种基本状态。

1. 就绪状态ready
2. 运行状态running
3. 阻塞状态blocked

线程实际上是在进程基础之上的进一步划分，一个进程启动之后，里面的若干进程又可以划分为若干个线程。

线程：是进程中的一个执行路径，共享一个内存空间，线程之间可以自由切换，并发执行，一个进程最少有一个线程（单线程程序）

一个程序可以同时执行多个任务来提高效率。

并行：就是两个任务同时运行（多个CPU）

并发：是指两个人任务同时请求运行，而处理器一次只能接受一个任务，就会把两个任务轮流安排执行，由于CPU时间片运行时间较短，就会感觉两个任务在同时进行。

## 线程的基本使用

线程实现的两种方式

1、继承Thread类

2、实现Runnable

## 线程休眠

是现在当前正在执行的线程以指定的毫秒数暂停（暂时停止执行），释放CPU的时间片，具体取决于系统定时器和调度程序的精度和准确性。线程不会丢失任何显示器的所有权。

## join与中断线程

```
join方法：
* 加入线程，让调用的线程先执行指定时间或执行完毕，而后再继续其他线程的运行
* 中断线程：
* 1、使用interrupt方法来中断线程，设置一个中断状态（标记）
* 2、自定义标记的方式(推荐使用）
```

## 守护线程daemon与yield

```
线程可以分为守护线程和用户线程，当进程中没有用户线程时，JVM会退出
yield让出当前CPU运行时间片
```

## 其他方法与优先级

## 线程同步

使得线程对象同步

```
* 线程同步
* 1、多线程共享数据时，会发生线程不安全的情况
* 2、多线程共享数据必需使用同步来解决
* 同步的实现方法：
* 1、同步代码块
* 2、同步方法
* 3、使用Lock（更灵活的代码控制）
* 多线程共享数据，会有安全问题，使用同步可以解决安全问题，但同时会牺牲性能，
* 所以同步代码块要尽量保持简洁，把不随数据变化的相关代码移除同步，不要阻塞。
* 同步准则：
* 1、使代码块保持简洁，把不随线程变化的预处理和后处理移除synchronized。
* 2、不要阻塞，如InputStream.read()
* 3、在持有锁的时候，不要对其他对象调用方法。
```

## 死锁

过多的同步有可能出现死锁，死锁的操作一般是在程序运行的时候才有可能出现

多线程中要进行资源的共享，就需要同步，但同步过多，就可能造成死锁。

在一个同步方法中调用了另一个对象的同步方法，可能产生死锁。

##　生产者与消费者应用案例

## 线程生命周期

new新建、start就绪状态（Runnable）、获取到CPU（running）、run（）、结束（dead）。

running（join|sleep）、blocked（sleep|join|IO完成）回到Runnable。

running（yield）回到Runnable。

running（wait）等待blocked，notify|notifyAll|interrupt、锁定blocked、Runnable。

running（synchronized）、blocked。

##　线程池

线程池是预先创建线程的一种技术。线程池在还没有任务到来之前，创建一定数量的线程，放入到空闲队列中，然后对这些资源进行复用。减少频繁的创建和销毁对象。

Java里面线程池的顶级接口时Executor，是一个执行线程的工具。

线程池接口是ExecutorService。

java.util.concurrent包：并发编程中常用的工具包

